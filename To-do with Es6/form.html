<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
       #msg{
           color: red;
           margin-left: 390px;
       }
       table{
           margin-left: 390px;
       }
       #name{
        margin-left: 390px;
       }
    </style>
</head>
<body>
    <p id="msg"></p>
    <h1 class="text-center">To-do</h1>
    <input type="text" id="name" placeholder="Name">
    <button type="submit" onclick="obj.Add()" id="btn">Add</button>
    <span id="btn2" style="display: none;"></span><br><br>
    <table id="Mytable">
        <thead>
        <tr><th>sn</th>
            <th>Name</th>
            <th colspan="2">Action</th>
        </tr>
    </thead>
    <tbody id="table">
        
    </tbody>
   
    </table>
</body>
<script>


 btnn = document.getElementById('btn');
let sn = 0;
class Todo{
 Add =() =>{
    
    var namee = document.getElementById('name').value;
    
   if(namee == "") {
    document.getElementById('msg').innerHTML = "Field can not be empty"
   } else {
     
       var namee = document.getElementById('name').value;
       let tr = document.createElement('tr');
       let sno = tr.appendChild(document.createElement('td'));
       let nametd = tr.appendChild(document.createElement('td'));
       let edit = tr.appendChild(document.createElement('td'));
       let dlt = tr.appendChild(document.createElement('td'));
       console.log(`${namee}`);

        sno.innerHTML = ++sn;
       nametd.innerHTML = namee;
        edit.innerHTML = `<button onclick="obj.editFunc(this)" id="editbtn">Edit</button>`;
        dlt.innerHTML = `<button onclick="obj.delfun(this)" id="dltbtn">Delete</button>`;
        document.getElementById('table').appendChild(tr);

   }
}

 delfun=(e)=> {
 var dele = e.parentNode.parentNode;
 dele.parentNode.removeChild(dele);
 console.log(dele);
}


   editFunc=(e)=>{
        console.log(e); //edit button
        var s=e.parentNode.parentNode; // row 
        var rowInd = s.rowIndex; //row index
        console.log("rowInd",rowInd);
        console.log("s",s);
        let Add = document.getElementById('btn');
    
        Add.style.display="none";
        let upd = document.getElementById('btn2');
        
        upd.innerHTML = `<button id="upd" onclick="obj.upFunc(${rowInd})">Update</button>`;

        upd.style.display = "inline"
        var sales = s.getElementsByTagName('td')
        console.log("sales",sales);
        document.getElementById('name').value = sales[1].innerHTML;
        
       
    }

    //bcz update button is same for everyrow thats why we use this
    
      upFunc=(e)=>{
        // var table = document.getElementById('Mytable');
        // var row = table.rows[e];  //table and its row and passing perticiular id bcz we alerdy table thn no need to write agin creating
        // console.log(row);
        var colom = document.getElementsByTagName('td');
        console.log(colom);
        colom[1].innerHTML = document.getElementById('name').value;
        let Add = document.getElementById('btn');
        Add.style.display="inline";
        let upd = document.getElementById('btn2');
        upd.style.display = "none"
        document.getElementById('name').value = "";
    //     console.log(e);
    //   var sno=document.getElementById('editserial').value;
    //     var etask=document.getElementById('editTask').value;
    //     var s=e.parentNode.parentNode;
    //       var tr=document.createElement('tr');
    //       var td1=tr.appendChild(document.createElement('td'));
    //       var td2=tr.appendChild(document.createElement('td'));
    //       var td3=tr.appendChild(document.createElement('td'));
    //       var td4=tr.appendChild(document.createElement('td'));
          
    //     td1.innerHTML=sno;
    //     td2.innerHTML=etask;
    //     td3.innerHTML=`<button onclick="delFunc(this)";>Delete</button>` ;
    //     td4.innerHTML= `<button onclick="editFunc(this)";>Edit</button>`;
    //   document.getElementById('myTable').replaceChild(tr,s);
        
   

    }
}
    const obj=new Todo;

</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</html>